<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ñ–ª–µ—à–∫–∞—Ä—Ç - SmartScroll</title>
    <link rel="stylesheet" href="unified-navbar.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Button Audio System -->
    <script src="button-audio.js"></script>
    
    <style>
        /* –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Ñ–ª–µ—à–∫–∞—Ä—Ç */
        .flashcard-generator {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .upload-section {
            background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .input-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .input-tab {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            padding: 12px 24px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        
        .input-tab.active {
            color: #30CAA1;
            border-bottom-color: #30CAA1;
        }
        
        .input-tab:hover {
            color: #30CAA1;
        }
        
        .text-input-section {
            display: none;
        }
        
        .text-input-section.active {
            display: block;
        }
        
        .text-input-area {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            color: white;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            font-family: inherit;
        }
        
        .text-input-area:focus {
            outline: none;
            border-color: #30CAA1;
            box-shadow: 0 0 10px rgba(48, 202, 161, 0.3);
        }
        
        .text-input-area::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .text-input-actions {
            display: flex;
            gap: 15px;
            margin-top: 15px;
            justify-content: flex-end;
        }
        
        .text-input-btn {
            background: linear-gradient(135deg, #30CAA1 0%, #20A0FF 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .text-input-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(48, 202, 161, 0.4);
        }
        
        .text-input-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
        }
        
        .text-input-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .upload-section h2 {
            color: #30CAA1;
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: 700;
        }
        
        .upload-area {
            border: 2px dashed rgba(48, 202, 161, 0.3);
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: rgba(48, 202, 161, 0.05);
        }
        
        .upload-area:hover {
            border-color: #30CAA1;
            background: rgba(48, 202, 161, 0.1);
            transform: translateY(-2px);
        }
        
        .upload-area.dragover {
            border-color: #30CAA1;
            background: rgba(48, 202, 161, 0.15);
            transform: scale(1.02);
        }
        
        .upload-icon {
            font-size: 48px;
            margin-bottom: 15px;
            color: #30CAA1;
        }
        
        .upload-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            margin-bottom: 10px;
        }
        
        .upload-subtext {
            color: rgba(255, 255, 255, 0.5);
            font-size: 14px;
        }
        
        .file-input {
            display: none;
        }
        
        .upload-btn {
            background: linear-gradient(135deg, #30CAA1 0%, #20A0FF 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(48, 202, 161, 0.4);
        }
        
        .material-preview {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }
        
        .material-preview h3 {
            color: #30CAA1;
            margin-bottom: 15px;
        }
        
        .material-content {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.6;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .generate-section {
            background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .generate-section h2 {
            color: #30CAA1;
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: 700;
        }
        
        .generate-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .option-group {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
        }
        
        .option-group label {
            color: #30CAA1;
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }
        
        .option-group select,
        .option-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 14px;
        }
        
        .option-group select:focus,
        .option-group input:focus {
            outline: none;
            border-color: #30CAA1;
            box-shadow: 0 0 10px rgba(48, 202, 161, 0.3);
        }
        
        .generate-btn {
            background: linear-gradient(135deg, #30CAA1 0%, #20A0FF 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(48, 202, 161, 0.4);
        }
        
        .generate-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .flashcards-section {
            background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .flashcards-section h2 {
            color: #30CAA1;
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: 700;
        }
        
        .flashcards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .flashcard {
            background: linear-gradient(145deg, #2a2a2a, #1e1e1e);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            min-height: 200px;
            height: 200px;
        }
        
        .flashcard:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: #30CAA1;
        }
        
        .flashcard {
            perspective: 1000px;
        }
        
        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        
        .flashcard-front,
        .flashcard-back {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
        }
        
        .flashcard-question {
            color: #30CAA1;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
            word-wrap: break-word;
            max-width: 100%;
        }
        
        .flashcard-answer {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.6;
            text-align: center;
            word-wrap: break-word;
            max-width: 100%;
        }
        
        .flashcard-category {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(48, 202, 161, 0.2);
            color: #30CAA1;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            z-index: 10;
        }
        
        .flashcard-actions {
            position: absolute;
            bottom: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
            z-index: 10;
        }
        
        .flashcard-action {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .flashcard-action:hover {
            background: rgba(48, 202, 161, 0.3);
            color: #30CAA1;
            transform: scale(1.1);
        }
        
        .no-flashcards {
            text-align: center;
            padding: 40px;
            color: rgba(255, 255, 255, 0.5);
        }
        
        .no-flashcards-icon {
            font-size: 48px;
            margin-bottom: 15px;
            color: rgba(255, 255, 255, 0.3);
        }
        
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è NLP –∫–≤–∏–∑–∞ */
        .nlp-quiz-section {
            background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .nlp-quiz-section h2 {
            color: #ff6b6b;
            margin-bottom: 20px;
            font-size: 24px;
            font-weight: 700;
        }
        
        .nlp-quiz-controls {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .nlp-quiz-container {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
        }
        
        .quiz-progress {
            margin-bottom: 30px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            text-align: center;
        }
        
        .quiz-question {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .question-text {
            color: #30CAA1;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .question-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .question-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            line-height: 1.4;
        }
        
        .question-option:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: #30CAA1;
            transform: translateX(5px);
        }
        
        .question-option.selected {
            background: rgba(48, 202, 161, 0.2);
            border-color: #30CAA1;
            color: #30CAA1;
        }
        
        .question-option.correct {
            background: rgba(46, 204, 113, 0.2);
            border-color: #2ecc71;
            color: #2ecc71;
        }
        
        .question-option.incorrect {
            background: rgba(231, 76, 60, 0.2);
            border-color: #e74c3c;
            color: #e74c3c;
        }
        
        .quiz-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .quiz-btn {
            background: linear-gradient(135deg, #30CAA1 0%, #20A0FF 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(48, 202, 161, 0.4);
        }
        
        .quiz-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
        }
        
        .quiz-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .quiz-results {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
        }
        
        .quiz-results h3 {
            color: #30CAA1;
            margin-bottom: 25px;
            font-size: 22px;
        }
        
        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            display: block;
            margin-bottom: 8px;
        }
        
        .stat-value {
            color: #30CAA1;
            font-size: 24px;
            font-weight: 700;
        }
        
        .results-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .flashcard-generator {
                padding: 15px;
            }
            
            .upload-section,
            .generate-section,
            .flashcards-section,
            .nlp-quiz-section {
                padding: 20px;
            }
            
            .generate-options {
                grid-template-columns: 1fr;
            }
            
            .flashcards-grid {
                grid-template-columns: 1fr;
            }
            
            .results-stats {
                grid-template-columns: 1fr;
            }
            
            .quiz-actions,
            .results-actions {
                flex-direction: column;
                align-items: center;
            }
            
        }
    </style>
</head>
<body>
    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –µ–¥–∏–Ω–æ–≥–æ –Ω–∞–≤–±–∞—Ä–∞ -->
    <div id="navbar-container"></div>
    
    <div class="page content-with-navbar">
        <div class="flashcard-generator">
            <!-- –°–µ–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ -->
            <div class="upload-section">
                <h2>üìö –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</h2>
                
                <!-- –í–∫–ª–∞–¥–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ –≤–≤–æ–¥–∞ -->
                <div class="input-tabs">
                    <button class="input-tab active" onclick="switchInputMode('file')">
                        üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
                    </button>
                    <button class="input-tab" onclick="switchInputMode('text')">
                        ‚úèÔ∏è –í–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç
                    </button>
                </div>
                
                <!-- –°–µ–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ -->
                <div class="file-input-section active" id="fileInputSection">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÑ</div>
                        <div class="upload-text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</div>
                        <div class="upload-subtext">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: PDF, TXT, DOC, DOCX, MD</div>
                        <input type="file" id="fileInput" class="file-input" accept=".pdf,.txt,.doc,.docx,.md">
                        <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                            –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª
                        </button>
                    </div>
                </div>
                
                <!-- –°–µ–∫—Ü–∏—è –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ -->
                <div class="text-input-section" id="textInputSection">
                    <textarea 
                        class="text-input-area" 
                        id="textInput" 
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–ª–µ—à–∫–∞—Ä—Ç. –í—ã –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç –∏–∑ –ª—é–±–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞: —É—á–µ–±–Ω–∏–∫–∏, —Å—Ç–∞—Ç—å–∏, –ª–µ–∫—Ü–∏–∏, –∑–∞–º–µ—Ç–∫–∏ –∏ —Ç.–¥."
                    ></textarea>
                    <div class="text-input-actions">
                        <button class="text-input-btn secondary" onclick="clearTextInput()">
                            üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
                        </button>
                        <button class="text-input-btn" onclick="processTextInput()">
                            ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
                        </button>
                    </div>
                </div>
                
                <div class="material-preview" id="materialPreview">
                    <h3>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–∞</h3>
                    <div class="material-content" id="materialContent"></div>
                </div>
            </div>
            
            <!-- –°–µ–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ -->
            <div class="generate-section">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–ª–µ—à–∫–∞—Ä—Ç</h2>
                <div class="generate-options">
                    <div class="option-group">
                        <label for="cardCount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫</label>
                        <select id="cardCount">
                            <option value="5">5 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
                            <option value="10" selected>10 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
                            <option value="15">15 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
                            <option value="20">20 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
                            <option value="25">25 –∫–∞—Ä—Ç–æ—á–µ–∫</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label for="difficulty">–°–ª–æ–∂–Ω–æ—Å—Ç—å</label>
                        <select id="difficulty">
                            <option value="beginner">–ù–∞—á–∞–ª—å–Ω—ã–π</option>
                            <option value="intermediate" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                            <option value="advanced">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label for="cardType">–¢–∏–ø –∫–∞—Ä—Ç–æ—á–µ–∫</label>
                        <select id="cardType">
                            <option value="definition">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è</option>
                            <option value="question" selected>–í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã</option>
                            <option value="concept">–ö–æ–Ω—Ü–µ–ø—Ü–∏–∏</option>
                            <option value="mixed">–°–º–µ—à–∞–Ω–Ω—ã–π</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label for="language">–Ø–∑—ã–∫</label>
                        <select id="language">
                            <option value="ru" selected>–†—É—Å—Å–∫–∏–π</option>
                            <option value="en">English</option>
                            <option value="mixed">–°–º–µ—à–∞–Ω–Ω—ã–π</option>
                        </select>
                    </div>
                </div>
                
                <button class="generate-btn" id="generateBtn" onclick="generateFlashcards()">
                    <span id="generateText">üéØ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã</span>
                    <div class="loading-spinner" id="loadingSpinner" style="display: none;"></div>
                </button>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
                <button class="generate-btn" onclick="testFlashcards()" style="margin-top: 10px; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);">
                    üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã
                </button>
            </div>
            
            <!-- –°–µ–∫—Ü–∏—è NLP –∫–≤–∏–∑–∞ -->
            <div class="nlp-quiz-section">
                <h2>üß† NLP –ö–≤–∏–∑ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª—É</h2>
                <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 20px;">
                    –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–≤–∏–∑, –∫–æ—Ç–æ—Ä—ã–π –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–∞—à –º–∞—Ç–µ—Ä–∏–∞–ª —Å –ø–æ–º–æ—â—å—é NLP –∏ —Å–æ–∑–¥–∞–µ—Ç —É–º–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
                </p>
                
                <div class="nlp-quiz-controls">
                    <button class="generate-btn" id="startNlpQuizBtn" onclick="startNlpQuiz()" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);">
                        üß† –ù–∞—á–∞—Ç—å NLP –∫–≤–∏–∑
                    </button>
                </div>
                
                <div class="nlp-quiz-container" id="nlpQuizContainer" style="display: none;">
                    <div class="quiz-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="quizProgress"></div>
                        </div>
                        <div class="progress-text" id="progressText">–í–æ–ø—Ä–æ—Å 1 –∏–∑ 5</div>
                    </div>
                    
                    <div class="quiz-question" id="quizQuestion">
                        <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    
                    <div class="quiz-actions">
                        <button class="quiz-btn secondary" onclick="skipQuestion()">‚è≠Ô∏è –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
                        <button class="quiz-btn" onclick="submitAnswer()" id="submitBtn">‚úÖ –û—Ç–≤–µ—Ç–∏—Ç—å</button>
                    </div>
                </div>
                
                <div class="quiz-results" id="quizResults" style="display: none;">
                    <h3>üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–≤–∏–∑–∞</h3>
                    <div class="results-stats">
                        <div class="stat-item">
                            <span class="stat-label">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤:</span>
                            <span class="stat-value" id="correctAnswers">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤:</span>
                            <span class="stat-value" id="totalQuestions">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">–ü—Ä–æ—Ü–µ–Ω—Ç:</span>
                            <span class="stat-value" id="quizPercentage">0%</span>
                        </div>
                    </div>
                    <div class="results-actions">
                        <button class="quiz-btn" onclick="restartQuiz()">üîÑ –ü—Ä–æ–π—Ç–∏ –µ—â–µ —Ä–∞–∑</button>
                        <button class="quiz-btn secondary" onclick="generateFlashcardsFromQuiz()">üÉè –°–æ–∑–¥–∞—Ç—å —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã</button>
                    </div>
                </div>
            </div>
            
            <!-- –°–µ–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–ª–µ—à–∫–∞—Ä—Ç -->
            <div class="flashcards-section">
                <h2>üÉè –í–∞—à–∏ —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã</h2>
                <div class="flashcards-grid" id="flashcardsGrid">
                    <div class="no-flashcards" id="noFlashcards">
                        <div class="no-flashcards-icon">üÉè</div>
                        <div>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã</div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="unified-navbar.js"></script>
    <script src="script.js"></script>
    
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let uploadedMaterial = null;
        let generatedFlashcards = [];
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è NLP –∫–≤–∏–∑–∞
        let nlpQuizQuestions = [];
        let currentQuestionIndex = 0;
        let quizAnswers = [];
        let quizScore = 0;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è...');
            initializeFlashcardGenerator();
        });
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
        setTimeout(() => {
            console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏...');
            const grid = document.getElementById('flashcardsGrid');
            const noFlashcards = document.getElementById('noFlashcards');
            console.log('Grid –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏:', grid);
            console.log('NoFlashcards –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏:', noFlashcards);
        }, 1000);
        
        function initializeFlashcardGenerator() {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Ñ–ª–µ—à–∫–∞—Ä—Ç');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            checkRequiredElements();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –µ–¥–∏–Ω—ã–π –Ω–∞–≤–±–∞—Ä
            loadUnifiedNavbar();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤
            initializeFileUpload();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥
            initializeTextInput();
            
            console.log('‚úÖ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ñ–ª–µ—à–∫–∞—Ä—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
        }
        
        function checkRequiredElements() {
            const requiredElements = [
                'flashcardsGrid',
                'noFlashcards',
                'generateBtn',
                'textInput',
                'fileInput'
            ];
            
            requiredElements.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    console.log(`‚úÖ –≠–ª–µ–º–µ–Ω—Ç ${id} –Ω–∞–π–¥–µ–Ω`);
                } else {
                    console.error(`‚ùå –≠–ª–µ–º–µ–Ω—Ç ${id} –ù–ï –Ω–∞–π–¥–µ–Ω!`);
                }
            });
        }
        
        function loadUnifiedNavbar() {
            fetch('unified-navbar.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('navbar-container').innerHTML = html;
                    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞–≤–±–∞—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
                    if (typeof initializeNavbar === 'function') {
                        initializeNavbar();
                    }
                })
                .catch(error => {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –µ–¥–∏–Ω–æ–≥–æ –Ω–∞–≤–±–∞—Ä–∞:', error);
                });
        }
        
        function initializeFileUpload() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileUpload(files[0]);
                }
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleFileUpload(e.target.files[0]);
                }
            });
        }
        
        function handleFileUpload(file) {
            console.log('üìÅ –ó–∞–≥—Ä—É–∂–µ–Ω —Ñ–∞–π–ª:', file.name);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞
            const allowedTypes = [
                'application/pdf',
                'text/plain',
                'application/msword',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                'text/markdown'
            ];
            
            if (!allowedTypes.includes(file.type) && !file.name.endsWith('.md')) {
                alert('–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ PDF, TXT, DOC, DOCX –∏–ª–∏ MD —Ñ–∞–π–ª.');
                return;
            }
            
            // –ß–∏—Ç–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                uploadedMaterial = {
                    name: file.name,
                    type: file.type,
                    content: content,
                    size: file.size
                };
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
                showMaterialPreview(content);
            };
            
            if (file.type === 'text/plain' || file.name.endsWith('.md')) {
                reader.readAsText(file);
            } else {
                // –î–ª—è PDF –∏ DOC —Ñ–∞–π–ª–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
                uploadedMaterial = {
                    name: file.name,
                    type: file.type,
                    content: null,
                    size: file.size
                };
                showMaterialPreview('–§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω. –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ PDF –∏ DOC —Ñ–∞–π–ª–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.');
            }
        }
        
        function showMaterialPreview(content) {
            const preview = document.getElementById('materialPreview');
            const contentDiv = document.getElementById('materialContent');
            
            if (content && content.length > 1000) {
                content = content.substring(0, 1000) + '...';
            }
            
            contentDiv.textContent = content;
            preview.style.display = 'block';
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ –≤–≤–æ–¥–∞
        function switchInputMode(mode) {
            const fileTab = document.querySelector('.input-tab[onclick*="file"]');
            const textTab = document.querySelector('.input-tab[onclick*="text"]');
            const fileSection = document.getElementById('fileInputSection');
            const textSection = document.getElementById('textInputSection');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏
            fileTab.classList.toggle('active', mode === 'file');
            textTab.classList.toggle('active', mode === 'text');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏
            fileSection.classList.toggle('active', mode === 'file');
            textSection.classList.toggle('active', mode === 'text');
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
        function initializeTextInput() {
            const textInput = document.getElementById('textInput');
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ textarea
            textInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.max(200, this.scrollHeight) + 'px';
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ —Ç–µ–∫—Å—Ç–∞
            textInput.addEventListener('paste', function(e) {
                setTimeout(() => {
                    this.style.height = 'auto';
                    this.style.height = Math.max(200, this.scrollHeight) + 'px';
                }, 10);
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
        function processTextInput() {
            const textInput = document.getElementById('textInput');
            const text = textInput.value.trim();
            
            if (!text) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–ª–µ—à–∫–∞—Ä—Ç.');
                return;
            }
            
            if (text.length < 50) {
                alert('–¢–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª (–º–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤).');
                return;
            }
            
            console.log('üìù –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞:', text.length, '—Å–∏–º–≤–æ–ª–æ–≤');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª
            uploadedMaterial = {
                name: '–í–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç',
                type: 'text/plain',
                content: text,
                size: text.length
            };
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
            showMaterialPreview(text);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            showNotification('‚úÖ –¢–µ–∫—Å—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã.', 'success');
        }
        
        // –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
        function clearTextInput() {
            const textInput = document.getElementById('textInput');
            textInput.value = '';
            textInput.style.height = '200px';
            
            // –û—á–∏—â–∞–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª –µ—Å–ª–∏ –æ–Ω –±—ã–ª –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞
            if (uploadedMaterial && uploadedMaterial.name === '–í–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç') {
                uploadedMaterial = null;
                document.getElementById('materialPreview').style.display = 'none';
            }
        }
        
        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message, type = 'info') {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? 'linear-gradient(135deg, #30CAA1, #20A0FF)' : 'linear-gradient(135deg, #ff6b6b, #ee5a24)'};
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 1000;
                font-weight: 600;
                max-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease reverse';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        async function generateFlashcards() {
            if (!uploadedMaterial) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è.');
                return;
            }
            
            const generateBtn = document.getElementById('generateBtn');
            const generateText = document.getElementById('generateText');
            const loadingSpinner = document.getElementById('loadingSpinner');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            generateBtn.disabled = true;
            generateText.style.display = 'none';
            loadingSpinner.style.display = 'inline-block';
            
            try {
                // –ü–æ–ª—É—á–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
                const settings = {
                    cardCount: document.getElementById('cardCount').value,
                    difficulty: document.getElementById('difficulty').value,
                    cardType: document.getElementById('cardType').value,
                    language: document.getElementById('language').value
                };
                
                console.log('üéØ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–ª–µ—à–∫–∞—Ä—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:', settings);
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ñ–ª–µ—à–∫–∞—Ä—Ç (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç API –≤—ã–∑–æ–≤)
                await simulateFlashcardGeneration(settings);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                displayFlashcards();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–ª–µ—à–∫–∞—Ä—Ç:', error);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–ª–µ—à–∫–∞—Ä—Ç. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
            } finally {
                // –°–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                generateBtn.disabled = false;
                generateText.style.display = 'inline';
                loadingSpinner.style.display = 'none';
            }
        }
        
        async function simulateFlashcardGeneration(settings) {
            // –°–∏–º—É–ª–∏—Ä—É–µ–º –∑–∞–¥–µ—Ä–∂–∫—É API
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –º–∞—Ç–µ—Ä–∏–∞–ª–∞
            const isTextInput = uploadedMaterial && uploadedMaterial.name === '–í–≤–µ–¥–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç';
            const materialContent = uploadedMaterial ? uploadedMaterial.content : '';
            
            let sampleFlashcards = [];
            
            if (isTextInput && materialContent) {
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
                sampleFlashcards = generateFlashcardsFromText(materialContent, settings);
            } else {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
                sampleFlashcards = [
                    {
                        id: 1,
                        question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ?",
                        answer: "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ä–∞–∑–¥–µ–ª –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä–∞–º —É—á–∏—Ç—å—Å—è –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.",
                        category: "–ò–ò",
                        difficulty: settings.difficulty
                    },
                    {
                        id: 2,
                        question: "–ö–∞–∫–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç?",
                        answer: "1) –û–±—É—á–µ–Ω–∏–µ —Å —É—á–∏—Ç–µ–ª–µ–º (supervised learning)\n2) –û–±—É—á–µ–Ω–∏–µ –±–µ–∑ —É—á–∏—Ç–µ–ª—è (unsupervised learning)\n3) –û–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º (reinforcement learning)",
                        category: "–ò–ò",
                        difficulty: settings.difficulty
                    },
                    {
                        id: 3,
                        question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å?",
                        answer: "–ù–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å ‚Äî —ç—Ç–æ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å, –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –Ω–µ–π—Ä–æ–Ω–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö —É–∑–ª–æ–≤ (–Ω–µ–π—Ä–æ–Ω–æ–≤).",
                        category: "–ù–µ–π—Ä–æ—Å–µ—Ç–∏",
                        difficulty: settings.difficulty
                    },
                    {
                        id: 4,
                        question: "–û–±—ä—è—Å–Ω–∏—Ç–µ –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–≥–æ —Å–ø—É—Å–∫–∞",
                        answer: "–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫ ‚Äî —ç—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–¥–µ–ª–∏ –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç—É —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Ç–µ—Ä—å.",
                        category: "–ê–ª–≥–æ—Ä–∏—Ç–º—ã",
                        difficulty: settings.difficulty
                    },
                    {
                        id: 5,
                        question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ (overfitting)?",
                        answer: "–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –º–æ–¥–µ–ª—å —Å–ª–∏—à–∫–æ–º —Ö–æ—Ä–æ—à–æ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ–±—É—á–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–ª–æ—Ö–æ –æ–±–æ–±—â–∞–µ—Ç –Ω–∞ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ.",
                        category: "–ü—Ä–æ–±–ª–µ–º—ã",
                        difficulty: settings.difficulty
                    }
                ];
            }
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
            generatedFlashcards = sampleFlashcards.slice(0, parseInt(settings.cardCount));
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–ª–µ—à–∫–∞—Ä—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—Å—Ç–∞
        function generateFlashcardsFromText(text, settings) {
            console.log('üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–ª–µ—à–∫–∞—Ä—Ç –∏–∑ —Ç–µ–∫—Å—Ç–∞:', text.length, '—Å–∏–º–≤–æ–ª–æ–≤');
            
            // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–Ω—è—Ç–∏–π –∏ —Å–æ–∑–¥–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 20);
            const flashcards = [];
            
            // –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (—Å–ª–æ–≤–∞ —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã –∏–ª–∏ –¥–ª–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞)
            const words = text.match(/\b[A-Z–ê-–Ø][a-z–∞-—è]+\b|\b\w{6,}\b/g) || [];
            const uniqueWords = [...new Set(words)].slice(0, 10);
            
            // –°–æ–∑–¥–∞–µ–º —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
            sentences.slice(0, parseInt(settings.cardCount)).forEach((sentence, index) => {
                if (sentence.trim().length > 30) {
                    const words = sentence.trim().split(' ');
                    const keyWord = words.find(w => w.length > 6) || words[Math.floor(words.length / 2)];
                    
                    flashcards.push({
                        id: index + 1,
                        question: `–ß—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç—Å—è –æ "${keyWord}" –≤ —Ç–µ–∫—Å—Ç–µ?`,
                        answer: sentence.trim() + '.',
                        category: "–¢–µ–∫—Å—Ç",
                        difficulty: settings.difficulty
                    });
                }
            });
            
            // –ï—Å–ª–∏ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ñ–ª–µ—à–∫–∞—Ä—Ç, —Å–æ–∑–¥–∞–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            if (flashcards.length < parseInt(settings.cardCount)) {
                uniqueWords.slice(0, parseInt(settings.cardCount) - flashcards.length).forEach((word, index) => {
                    flashcards.push({
                        id: flashcards.length + index + 1,
                        question: `–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "${word}" –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞?`,
                        answer: `"${word}" - –∫–ª—é—á–µ–≤–æ–µ –ø–æ–Ω—è—Ç–∏–µ –∏–∑ —Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è.`,
                        category: "–¢–µ—Ä–º–∏–Ω—ã",
                        difficulty: settings.difficulty
                    });
                });
            }
            
            return flashcards;
        }
        
        function displayFlashcards() {
            const grid = document.getElementById('flashcardsGrid');
            const noFlashcards = document.getElementById('noFlashcards');
            
            console.log('üÉè –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–ª–µ—à–∫–∞—Ä—Ç:', generatedFlashcards.length);
            console.log('Grid —ç–ª–µ–º–µ–Ω—Ç:', grid);
            console.log('NoFlashcards —ç–ª–µ–º–µ–Ω—Ç:', noFlashcards);
            
            if (!grid) {
                console.error('‚ùå –≠–ª–µ–º–µ–Ω—Ç flashcardsGrid –Ω–µ –Ω–∞–π–¥–µ–Ω!');
                // –ü–æ–ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
                const alternativeGrid = document.querySelector('.flashcards-grid');
                if (alternativeGrid) {
                    console.log('‚úÖ –ù–∞–π–¥–µ–Ω –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç grid');
                    alternativeGrid.innerHTML = generatedFlashcards.map(card => `
                        <div class="flashcard" onclick="flipCard(this)">
                            <div class="flashcard-category">${card.category}</div>
                            <div class="flashcard-inner">
                                <div class="flashcard-front">
                                    <div class="flashcard-question">${card.question}</div>
                                </div>
                                <div class="flashcard-back">
                                    <div class="flashcard-answer">${card.answer}</div>
                                </div>
                            </div>
                            <div class="flashcard-actions">
                                <button class="flashcard-action" onclick="editCard(${card.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                                    ‚úèÔ∏è
                                </button>
                                <button class="flashcard-action" onclick="deleteCard(${card.id})" title="–£–¥–∞–ª–∏—Ç—å">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                    `).join('');
                    return;
                }
                return;
            }
            
            if (generatedFlashcards.length === 0) {
                if (noFlashcards) {
                    noFlashcards.style.display = 'block';
                }
                return;
            }
            
            if (noFlashcards) {
                noFlashcards.style.display = 'none';
            }
            
            // –õ–æ–≥–∏—Ä—É–µ–º –∫–∞–∂–¥—É—é –∫–∞—Ä—Ç–æ—á–∫—É –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
            generatedFlashcards.forEach((card, index) => {
                console.log(`–ö–∞—Ä—Ç–æ—á–∫–∞ ${index + 1}:`, {
                    question: card.question,
                    answer: card.answer,
                    category: card.category
                });
            });
            
            grid.innerHTML = generatedFlashcards.map(card => `
                <div class="flashcard" onclick="flipCard(this)">
                    <div class="flashcard-category">${card.category}</div>
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <div class="flashcard-question">${card.question}</div>
                        </div>
                        <div class="flashcard-back">
                            <div class="flashcard-answer">${card.answer}</div>
                        </div>
                    </div>
                    <div class="flashcard-actions">
                        <button class="flashcard-action" onclick="editCard(${card.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                            ‚úèÔ∏è
                        </button>
                        <button class="flashcard-action" onclick="deleteCard(${card.id})" title="–£–¥–∞–ª–∏—Ç—å">
                            üóëÔ∏è
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function flipCard(cardElement) {
            cardElement.classList.toggle('flipped');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–ª–µ—à–∫–∞—Ä—Ç
        function testFlashcards() {
            console.log('üß™ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–ª–µ—à–∫–∞—Ä—Ç');
            
            generatedFlashcards = [
                {
                    id: 1,
                    question: "–ß—Ç–æ —Ç–∞–∫–æ–µ JavaScript?",
                    answer: "JavaScript - —ç—Ç–æ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü.",
                    category: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
                    difficulty: "beginner"
                },
                {
                    id: 2,
                    question: "–ö–∞–∫ –æ–±—ä—è–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ JavaScript?",
                    answer: "–í JavaScript –º–æ–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å –ø–æ–º–æ—â—å—é –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: var, let –∏–ª–∏ const.",
                    category: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
                    difficulty: "beginner"
                },
                {
                    id: 3,
                    question: "–ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ—É–Ω–∫—Ü–∏—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏?",
                    answer: "–§—É–Ω–∫—Ü–∏—è - —ç—Ç–æ –±–ª–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ.",
                    category: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ",
                    difficulty: "intermediate"
                }
            ];
            
            displayFlashcards();
            showNotification('üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã —Å–æ–∑–¥–∞–Ω—ã!', 'success');
        }
        
        function editCard(cardId) {
            const card = generatedFlashcards.find(c => c.id === cardId);
            if (card) {
                const newQuestion = prompt('–í–æ–ø—Ä–æ—Å:', card.question);
                const newAnswer = prompt('–û—Ç–≤–µ—Ç:', card.answer);
                
                if (newQuestion && newAnswer) {
                    card.question = newQuestion;
                    card.answer = newAnswer;
                    displayFlashcards();
                }
            }
        }
        
        function deleteCard(cardId) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–∞—Ä—Ç–æ—á–∫—É?')) {
                generatedFlashcards = generatedFlashcards.filter(c => c.id !== cardId);
                displayFlashcards();
            }
        }
        
        // ===== NLP QUIZ FUNCTIONS =====
        
        async function startNlpQuiz() {
            if (!uploadedMaterial) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è.');
                return;
            }
            
            console.log('üß† –ù–∞—á–∏–Ω–∞–µ–º NLP –∫–≤–∏–∑');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–≤–∏–∑–∞
            document.getElementById('nlpQuizContainer').style.display = 'block';
            document.getElementById('quizResults').style.display = 'none';
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤–æ–ø—Ä–æ—Å—ã —Å –ø–æ–º–æ—â—å—é NLP
            await generateNlpQuestions();
            
            // –ù–∞—á–∏–Ω–∞–µ–º —Å –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
            currentQuestionIndex = 0;
            quizAnswers = [];
            quizScore = 0;
            
            displayCurrentQuestion();
        }
        
        async function generateNlpQuestions() {
            console.log('üîç –ì–µ–Ω–µ—Ä–∞—Ü–∏—è NLP –≤–æ–ø—Ä–æ—Å–æ–≤...');
            
            const materialContent = uploadedMaterial.content;
            if (!materialContent) {
                alert('–ù–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.');
                return;
            }
            
            // –°–∏–º—É–ª–∏—Ä—É–µ–º NLP –∞–Ω–∞–ª–∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–º–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
            nlpQuizQuestions = generateSmartQuestions(materialContent);
            
            console.log('‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤–æ–ø—Ä–æ—Å–æ–≤:', nlpQuizQuestions.length);
        }
        
        function generateSmartQuestions(text) {
            const questions = [];
            
            // –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 20);
            const keyWords = extractKeyWords(text);
            
            // –°–æ–∑–¥–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
            sentences.slice(0, 5).forEach((sentence, index) => {
                if (sentence.trim().length > 30) {
                    const words = sentence.trim().split(' ');
                    const keyWord = words.find(w => w.length > 6) || words[Math.floor(words.length / 2)];
                    
                    // –°–æ–∑–¥–∞–µ–º –≤–æ–ø—Ä–æ—Å –Ω–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
                    questions.push({
                        id: index + 1,
                        type: 'comprehension',
                        question: `–ß—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç—Å—è –æ "${keyWord}" –≤ –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ?`,
                        options: generateQuestionOptions(sentence, keyWord),
                        correctAnswer: 0,
                        explanation: `–í —Ç–µ–∫—Å—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—Å—è: "${sentence.trim()}"`,
                        source: 'comprehension'
                    });
                }
            });
            
            // –°–æ–∑–¥–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–≤
            keyWords.slice(0, 3).forEach((word, index) => {
                questions.push({
                    id: questions.length + 1,
                    type: 'definition',
                    question: `–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ç–µ—Ä–º–∏–Ω "${word}" –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–∞–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞?`,
                    options: generateDefinitionOptions(word, text),
                    correctAnswer: 0,
                    explanation: `"${word}" - –∫–ª—é—á–µ–≤–æ–µ –ø–æ–Ω—è—Ç–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞.`,
                    source: 'definition'
                });
            });
            
            return questions.slice(0, 5); // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º 5 –≤–æ–ø—Ä–æ—Å–∞–º–∏
        }
        
        function extractKeyWords(text) {
            // –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            const words = text.match(/\b[A-Z–ê-–Ø][a-z–∞-—è]+\b|\b\w{6,}\b/g) || [];
            const uniqueWords = [...new Set(words)].slice(0, 10);
            return uniqueWords;
        }
        
        function generateQuestionOptions(sentence, keyWord) {
            const options = [
                sentence.trim() + '.', // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                `–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ "${keyWord}" –Ω–µ —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–µ.`,
                `"${keyWord}" —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥—Ä—É–≥–∏—Ö —Ç–µ–º.`,
                `–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ "${keyWord}" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.`
            ];
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
            return shuffleArray(options);
        }
        
        function generateDefinitionOptions(word, text) {
            const options = [
                `"${word}" - –∫–ª—é—á–µ–≤–æ–µ –ø–æ–Ω—è—Ç–∏–µ –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, —Ç—Ä–µ–±—É—é—â–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏—è.`,
                `"${word}" - –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π —Ç–µ—Ä–º–∏–Ω, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–π –≤–Ω–∏–º–∞–Ω–∏—è.`,
                `"${word}" - —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ –ø–æ–Ω—è—Ç–∏–µ, –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è.`,
                `"${word}" - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–º–æ–π.`
            ];
            
            return shuffleArray(options);
        }
        
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }
        
        function displayCurrentQuestion() {
            if (currentQuestionIndex >= nlpQuizQuestions.length) {
                showQuizResults();
                return;
            }
            
            const question = nlpQuizQuestions[currentQuestionIndex];
            const questionContainer = document.getElementById('quizQuestion');
            const progressFill = document.getElementById('quizProgress');
            const progressText = document.getElementById('progressText');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            const progress = ((currentQuestionIndex + 1) / nlpQuizQuestions.length) * 100;
            progressFill.style.width = progress + '%';
            progressText.textContent = `–í–æ–ø—Ä–æ—Å ${currentQuestionIndex + 1} –∏–∑ ${nlpQuizQuestions.length}`;
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –≤–æ–ø—Ä–æ—Å
            questionContainer.innerHTML = `
                <div class="question-text">${question.question}</div>
                <div class="question-options">
                    ${question.options.map((option, index) => `
                        <div class="question-option" onclick="selectOption(${index})" data-index="${index}">
                            ${option}
                        </div>
                    `).join('')}
                </div>
            `;
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
            document.getElementById('submitBtn').disabled = true;
        }
        
        function selectOption(optionIndex) {
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
            document.querySelectorAll('.question-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
            const selectedOption = document.querySelector(`[data-index="${optionIndex}"]`);
            selectedOption.classList.add('selected');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
            quizAnswers[currentQuestionIndex] = optionIndex;
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –æ—Ç–≤–µ—Ç–∞
            document.getElementById('submitBtn').disabled = false;
        }
        
        function submitAnswer() {
            const selectedOption = document.querySelector('.question-option.selected');
            if (!selectedOption) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞.');
                return;
            }
            
            const question = nlpQuizQuestions[currentQuestionIndex];
            const selectedIndex = parseInt(selectedOption.dataset.index);
            const isCorrect = selectedIndex === question.correctAnswer;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            showCorrectAnswer(question, selectedIndex, isCorrect);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç
            if (isCorrect) {
                quizScore++;
            }
            
            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                currentQuestionIndex++;
                displayCurrentQuestion();
            }, 2000);
        }
        
        function showCorrectAnswer(question, selectedIndex, isCorrect) {
            const options = document.querySelectorAll('.question-option');
            
            options.forEach((option, index) => {
                option.onclick = null; // –û—Ç–∫–ª—é—á–∞–µ–º –∫–ª–∏–∫–∏
                
                if (index === question.correctAnswer) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
            const questionContainer = document.getElementById('quizQuestion');
            const explanation = document.createElement('div');
            explanation.style.cssText = `
                margin-top: 20px;
                padding: 15px;
                background: rgba(48, 202, 161, 0.1);
                border: 1px solid #30CAA1;
                border-radius: 10px;
                color: #30CAA1;
                font-size: 14px;
                line-height: 1.5;
            `;
            explanation.innerHTML = `<strong>–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:</strong> ${question.explanation}`;
            questionContainer.appendChild(explanation);
        }
        
        function skipQuestion() {
            quizAnswers[currentQuestionIndex] = -1; // –ü–æ–º–µ—á–∞–µ–º –∫–∞–∫ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π
            currentQuestionIndex++;
            displayCurrentQuestion();
        }
        
        function showQuizResults() {
            document.getElementById('nlpQuizContainer').style.display = 'none';
            document.getElementById('quizResults').style.display = 'block';
            
            const totalQuestions = nlpQuizQuestions.length;
            const percentage = Math.round((quizScore / totalQuestions) * 100);
            
            document.getElementById('correctAnswers').textContent = quizScore;
            document.getElementById('totalQuestions').textContent = totalQuestions;
            document.getElementById('quizPercentage').textContent = percentage + '%';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ
            let message = '';
            if (percentage >= 80) {
                message = 'üéâ –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã —Ö–æ—Ä–æ—à–æ —É—Å–≤–æ–∏–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª!';
            } else if (percentage >= 60) {
                message = 'üëç –•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ï—Å—Ç—å —á—Ç–æ —É–ª—É—á—à–∏—Ç—å.';
            } else {
                message = 'üìö –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è.';
            }
            
            showNotification(message, 'success');
        }
        
        function restartQuiz() {
            document.getElementById('quizResults').style.display = 'none';
            startNlpQuiz();
        }
        
        function generateFlashcardsFromQuiz() {
            console.log('üÉè –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–ª–µ—à–∫–∞—Ä—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–≤–∏–∑–∞');
            
            // –°–æ–∑–¥–∞–µ–º —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –∫–≤–∏–∑–∞
            const quizFlashcards = nlpQuizQuestions.map((question, index) => ({
                id: index + 1,
                question: question.question,
                answer: question.options[question.correctAnswer],
                category: question.type === 'comprehension' ? '–ü–æ–Ω–∏–º–∞–Ω–∏–µ' : '–¢–µ—Ä–º–∏–Ω—ã',
                difficulty: 'intermediate',
                source: 'nlp-quiz'
            }));
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ–ª–µ—à–∫–∞—Ä—Ç–∞–º
            generatedFlashcards = [...generatedFlashcards, ...quizFlashcards];
            
            // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ñ–ª–µ—à–∫–∞—Ä—Ç—ã
            displayFlashcards();
            
            showNotification('üÉè –§–ª–µ—à–∫–∞—Ä—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–≤–∏–∑–∞!', 'success');
        }
        
    </script>
</body>
</html>

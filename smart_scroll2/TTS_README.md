# üîä –°–∏—Å—Ç–µ–º–∞ –æ–∑–≤—É—á–∫–∏ –∫–Ω–æ–ø–æ–∫ SmartScroll

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –æ–∑–≤—É—á–∫–∏ –∫–Ω–æ–ø–æ–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–≤—É–∫–æ–≤—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ SmartScroll. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å Festival TTS —Å–µ—Ä–≤–µ—Ä–æ–º –∏–∑ –ø–∞–ø–∫–∏ `#2/` –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîä **–ó–≤—É–∫–æ–≤–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å** - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏
- üé§ **–û–∑–≤—É—á–∫–∞ —Ç–µ–∫—Å—Ç–∞** - –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –∫–Ω–æ–ø–æ–∫ —á–µ—Ä–µ–∑ Festival TTS
- üéµ **–°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–≤—É–∫–∏** - –ø—Ä–∏—è—Ç–Ω—ã–µ –∑–≤—É–∫–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
- ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å–∫ TTS —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Festival TTS —Å–µ—Ä–≤–µ—Ä
./start_tts_server.sh
```

### 2. –í–∫–ª—é—á–µ–Ω–∏–µ –æ–∑–≤—É—á–∫–∏

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/settings.html
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
3. –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–û–∑–≤—É—á–∫–∞ –∫–Ω–æ–ø–æ–∫"
4. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è –æ–∑–≤—É—á–∫–∏:
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –±—É–¥–µ—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å—Å—è –∑–≤—É–∫
- –ü—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –º—ã—à–∏ - —Ç–∏—Ö–∏–π –∑–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª
- –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω Festival TTS - –±—É–¥–µ—Ç –æ–∑–≤—É—á–∏–≤–∞—Ç—å—Å—è —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
SmartScroll/
‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îú‚îÄ‚îÄ settings.html              # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º –æ–∑–≤—É—á–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ button-audio.js            # –ú–æ–¥—É–ª—å –æ–∑–≤—É—á–∫–∏ –∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ button-audio-server.py     # –°–µ—Ä–≤–µ—Ä –æ–∑–≤—É—á–∫–∏ –∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ ...                        # –î—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îú‚îÄ‚îÄ #2/festival/                   # Festival TTS —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ speak.py                   # –°–∫—Ä–∏–ø—Ç –æ–∑–≤—É—á–∫–∏ —Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ generate_audio.py          # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ festival_server_fixed.sh   # Festival —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ web_server.py              # Flask –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ start_tts_server.sh            # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
‚îî‚îÄ‚îÄ test_button_audio.py           # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **ButtonAudioSystem** (`button-audio.js`)
   - –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∑–≤—É—á–∫–æ–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Festival TTS
   - –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–≤—É–∫–∏ —á–µ—Ä–µ–∑ Web Audio API

2. **Festival TTS Server** (`#2/festival/`)
   - –°–µ—Ä–≤–µ—Ä —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏ –Ω–∞ –ø–æ—Ä—Ç—É 1314
   - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –ø–æ—Ä—Ç—É 5001
   - –°–∫—Ä–∏–ø—Ç—ã speak.py –∏ generate_audio.py –¥–ª—è –æ–∑–≤—É—á–∫–∏
   - API –¥–ª—è –æ–∑–≤—É—á–∫–∏ —Ç–µ–∫—Å—Ç–∞

3. **Button Audio Server** (`button-audio-server.py`)
   - –°–µ—Ä–≤–µ—Ä –æ–∑–≤—É—á–∫–∏ –∫–Ω–æ–ø–æ–∫ –Ω–∞ –ø–æ—Ä—Ç—É 8001
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Festival TTS —Å–∫—Ä–∏–ø—Ç–∞–º–∏
   - REST API –¥–ª—è –æ–∑–≤—É—á–∫–∏ —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–æ–∫

4. **Settings Integration** (`settings.html`)
   - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ–∑–≤—É—á–∫–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üîß API

### ButtonAudioSystem

```javascript
// –í–∫–ª—é—á–µ–Ω–∏–µ –æ–∑–≤—É—á–∫–∏
window.ButtonAudio.enable();

// –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ–∑–≤—É—á–∫–∏
window.ButtonAudio.disable();

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
window.ButtonAudio.toggle();

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
window.ButtonAudio.isEnabled();

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
window.ButtonAudio.updateSettings();
```

### Festival TTS API

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
GET http://localhost:5001/api/status

// –û–∑–≤—É—á–∫–∞ —Ç–µ–∫—Å—Ç–∞
POST http://localhost:5001/api/speak
{
  "text": "–¢–µ–∫—Å—Ç –¥–ª—è –æ–∑–≤—É—á–∫–∏",
  "voice": "default"
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### localStorage

```javascript
// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
{
  "buttonAudio": true,  // –í–∫–ª—é—á–µ–Ω–∞ –ª–∏ –æ–∑–≤—É—á–∫–∞ –∫–Ω–æ–ø–æ–∫
  // ... –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
}
```

### CSS –∫–ª–∞—Å—Å—ã

```css
.button-audio-enabled {
  /* –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ–≥–¥–∞ –æ–∑–≤—É—á–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞ */
}
```

## üéµ –ó–≤—É–∫–∏

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–≤—É–∫–∏

- **–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ**: 800Hz ‚Üí 400Hz (0.1 —Å–µ–∫)
- **–ù–∞–≤–µ–¥–µ–Ω–∏–µ –º—ã—à–∏**: 800Hz ‚Üí 400Hz (0.1 —Å–µ–∫, —Ç–∏—à–µ)
- **–ì—Ä–æ–º–∫–æ—Å—Ç—å**: 30% –¥–ª—è –∫–ª–∏–∫–∞, 10% –¥–ª—è –Ω–∞–≤–µ–¥–µ–Ω–∏—è

### Festival TTS

- **–ì–æ–ª–æ—Å**: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**: –¢–µ–∫—Å—Ç –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤
- **–Ø–∑—ã–∫**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('–û–∑–≤—É—á–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞:', window.ButtonAudio.isEnabled());
console.log('Festival TTS –¥–æ—Å—Ç—É–ø–µ–Ω:', window.ButtonAudio.festivalTTSEnabled);
```

### –õ–æ–≥–∏

```javascript
// –í–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –ª–æ–≥–æ–≤
localStorage.setItem('debugButtonAudio', 'true');
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û–∑–≤—É—á–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```javascript
   // –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
   console.log(localStorage.getItem('accessibilitySettings'));
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Festival TTS:**
   ```bash
   curl http://localhost:5001/api/status
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   ./start_tts_server.sh
   ```

### –ó–≤—É–∫ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞:**
   - –†–∞–∑—Ä–µ—à–∏—Ç–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Web Audio API:**
   ```javascript
   // –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
   console.log('Web Audio API:', typeof AudioContext !== 'undefined');
   ```

### Festival TTS –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã:**
   ```bash
   lsof -i :1314  # Festival —Å–µ—Ä–≤–µ—Ä
   lsof -i :5001  # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   ```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä—ã:**
   ```bash
   pkill -f festival_server
   pkill -f web_server.py
   ./start_tts_server.sh
   ```

## üì± –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ë—Ä–∞—É–∑–µ—Ä—ã

- ‚úÖ Chrome 60+
- ‚úÖ Firefox 55+
- ‚úÖ Safari 11+
- ‚úÖ Edge 79+

### –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã

- ‚úÖ macOS
- ‚úÖ Windows
- ‚úÖ Linux
- ‚úÖ iOS (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏)
- ‚úÖ Android (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ localhost
- –ù–µ—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—ã
- –ó–≤—É–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
./start_tts_server.sh

# –û—Ç–∫—Ä—ã—Ç–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open http://localhost:8000/settings.html
```

### –ü—Ä–æ–¥–∞–∫—à–Ω

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
echo "./start_tts_server.sh" >> ~/.bashrc

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–∫ —Å–ª—É–∂–±—ã (systemd)
sudo systemctl enable smartscroll-tts
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Web Audio API](https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API)
- [Festival TTS](http://www.cstr.ed.ac.uk/projects/festival/)
- [Accessibility Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–æ–≤
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä—ã

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –æ–∑–≤—É—á–∫–∏ –∫–Ω–æ–ø–æ–∫ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –í–∫–ª—é—á–∏—Ç–µ –µ—ë –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∑–≤—É–∫–æ–≤–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º SmartScroll.